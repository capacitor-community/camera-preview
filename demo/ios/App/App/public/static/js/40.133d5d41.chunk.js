(this.webpackJsonpdemo=this.webpackJsonpdemo||[]).push([[40],{146:function(e,t,r){"use strict";r.r(t),r.d(t,"CameraPreviewWeb",(function(){return p}));var n=r(2),a=r.n(n),i=r(6),o=r(5),c=r(7),u=r(8),s=r(9),p=function(e){Object(u.a)(r,e);var t=Object(s.a)(r);function r(){return Object(o.a)(this,r),t.call(this,{name:"CameraPreview",platforms:["web"]})}return Object(c.a)(r,[{key:"start",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var r=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(a.a.mark((function e(n,i){var o,c,u,s,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!t.disableAudio,video:!0}).then((function(e){e.getTracks().forEach((function(e){return e.stop()}))})).catch((function(e){i(e)}));case 2:o=document.getElementById("video"),c=document.getElementById(t.parent),o?i({message:"camera already started"}):((u=document.createElement("video")).id="video",u.setAttribute("class",t.className||""),"rear"!==t.position&&u.setAttribute("style","-webkit-transform: scaleX(-1); transform: scaleX(-1);"),s=navigator.userAgent.toLowerCase(),s.includes("safari")&&!s.includes("chrome")&&(u.setAttribute("autoplay","true"),u.setAttribute("muted","true"),u.setAttribute("playsinline","true")),c.appendChild(u),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(p={video:{width:{ideal:t.width},height:{ideal:t.height}}},"rear"===t.position?(p.video.facingMode="environment",r.isBackCamera=!0):r.isBackCamera=!1,navigator.mediaDevices.getUserMedia(p).then((function(e){u.srcObject=e,u.play(),n({})}),(function(e){i(e)}))));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"startRecordVideo",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw this.unimplemented("Not implemented on web.");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stopRecordVideo",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw this.unimplemented("Not implemented on web.");case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,r,n,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("video")){for(t.pause(),r=t.srcObject,n=r.getTracks(),i=0;i<n.length;i++)n[i].stop();t.remove()}case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"capture",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var r=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=document.getElementById("video"),i=document.createElement("canvas"),o=i.getContext("2d");i.width=a.videoWidth,i.height=a.videoHeight,r.isBackCamera||(o.translate(a.videoWidth,0),o.scale(-1,1)),o.drawImage(a,0,0,a.videoWidth,a.videoHeight),e({value:void 0!=t.quality?i.toDataURL("image/jpeg",t.quality/100).replace("data:image/jpeg;base64,",""):i.toDataURL("image/png").replace("data:image/png;base64,","")})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"captureSample",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.capture(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSupportedFlashModes",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getSupportedFlashModes not supported under the web platform");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setFlashMode",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setFlashMode not supported under the web platform");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"flip",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("flip not supported under the web platform");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setOpacity",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=document.getElementById("video"))&&t.opacity&&r.style.setProperty("opacity",t.opacity.toString());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(r(51).a)}}]);
//# sourceMappingURL=40.133d5d41.chunk.js.map